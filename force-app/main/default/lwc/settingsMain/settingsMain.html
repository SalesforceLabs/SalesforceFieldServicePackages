<template>
    <div class="main"  onscroll={onScroll}>
        <template if:true={isLoading}>
            <lightning-spinner alternative-text="Loading" variant="brand" size="large">
            </lightning-spinner>
        </template>
        <lightning-card class="bgGray">
            <h2 class="slds-p-around_large slds-text-heading_large bigTitle" >
                Field Service Starter Kit Settings
            </h2>
        </lightning-card>
        <br/>
        <lightning-card>
            <lightning-card class="borderCls" >
                <div class="slds-p-horizontal_x-large">
                    <h2
                        class="slds-text-heading_small slds-m-bottom_small slds-p-horizontal_x-large" >
                        <b> Status Based Flows</b>
                    </h2>
                </div>
                <div  class="slds-p-horizontal_x-large" style="display:flex;">
                    <div class ="slds-col slds-size_2-of-3 slds-p-horizontal_x-large slds-p-bottom_large" >
                        <!-- <div class="slds-p-around_small cLineStyle">

                            <div class="leftCLine">
                                <lightning-input   checked={fl_cb_1}
                                                    class="cb"
                                                    type="checkbox" 
                                                    disabled={cbx_cb_Dis_1}
                                                    label="Status Transition (Field Service Mobile Flow)"
                                                    onchange={onSB1Change}>
                                </lightning-input>
                            </div>
                            <div style={rightCLine} class="lgc-bg">
                                <lightning-helptext
                                    content="A Field Salesforce Mobile flow that allows service resources to update the service appointment status field. This flow is a prerequisite for all other Status Based Flows in the package in case you want to have offline support.">
                                </lightning-helptext>
                            </div>
                        </div> -->
                        <div class="slds-p-around_small cLineStyle">
            
                            <div class="leftCLine">
                                <lightning-input   checked={fl_cb_2}
                                                    class="cb"
                                                    type="checkbox" 
                                                    disabled={cbx_cb_Dis_2}
                                                    label="Automatically update the Actual Start and Actual End fields"
                                                    onchange={onSB2Change}>
                                </lightning-input>
                            </div>
                            <div class="lgc-bg rightCLine">
                                <lightning-helptext
                                content="This flow updates the Actual Start and Actual End fields on the service appointment based on changes to the service appointment Status field. Use the checkboxes on the right to select the status values that indicates when the work starts and the values that indicate when the work is completed.">
                            </lightning-helptext>
                            </div>
                        </div>
                        <div  class="slds-p-around_small cLineStyle ">
            
                            <div class="leftCLine">
                                <lightning-input   checked={fl_cb_3}
                                                    class="cb"
                                                    type="checkbox"
                                                    disabled={cbx_cb_Dis_3}
                                                    label="Automatically update the Scheduled Start and Scheduled End fields"
                                                    onchange={onSB3Change}>
                                </lightning-input>
                            </div>
                            <div style={rightCLine} class="lgc-bg">
                                <lightning-helptext 
                                content="This flow updates the Scheduled Start and Scheduled End fields on the service appointment based on changes to the service appointment Status field. Use the checkboxes on the right to select the status values that indicates when the work starts and the values that indicate when the work is completed.">
                            </lightning-helptext>
                            </div>
                        </div>
                    </div>
                    <div  class ="slds-col slds-size_1-of-3 slds-p-horizontal_x-large" style="display: flex;">  
                        <div class="rightCardStyle">
                            <lightning-checkbox-group name="Checkbox Group"
                                                class="cb-st"
                                                label="Select starting status"
                                                options={getStatusStartList}
                                                value={startStValues}
                                                onchange={handleStartStChange}>
                            </lightning-checkbox-group>
                        </div>
                        <div class="slds-p-horizontal_medium rightCardStyle"> 
                            <lightning-checkbox-group name="Checkbox Group"
                                                class="cb-st"
                                                label="Select ending status"
                                                options={getStatusEndList}
                                                value={endStValues}
                                                onchange={handleEndStChange}>
                            </lightning-checkbox-group>
                        </div>
                    </div>
                </div>
            </lightning-card>
            
            <lightning-card class="borderCls" >
                <div  class="slds-col slds-size_2-of-3 slds-p-horizontal_x-large" style={cardHeaderStyle}>
                    <div  style={titleHeaderleft}>
                        <h2  style={titleStyle}
                            class="slds-text-heading_small slds-m-bottom_small slds-p-horizontal_x-large" >
                            <b>Mobile Notifications</b>
                        </h2>
                    </div>
                    <div class="headerRight">
                        
                            <lightning-input  data-id="toggleInputAvailability" 
                                type="toggle" 
                                label=""
                                onchange = {toggleChange}
                                name="input2"
                                checked={mobileCannedCustomNotification}>
                            </lightning-input>
                    </div>
                </div>
                <div class="slds-col slds-size_2-of-3 slds-p-left_x-large ">

                    <div class="slds-p-horizontal_x-large">
                        <div >
                            <div class="slds-p-top_small slds-p-right_small mn_line cLineStyle">
                                <div class="leftCLine">
                                    <fieldset class="slds-form-element slds-form_horizontal slds-size_4-of-5">
                                        <div class="slds-form-element__control">
                                            <div class="slds-form-element__group">
                                                <div class="slds-form-element__row">
                                                    <div class="slds-form-element">
                                                        <label class="slds-form-element__label">Hours before the appointment start time:</label>
                                                        <div class="slds-form-element__control">
                                                            <lightning-input 
                                                                type="number" 
                                                                name="input1"
                                                                onchange={handleNumOfHChange}
                                                                value={num_of_h_mn}
                                                                disabled={cbx_nm_Dis_1}
                                                                >
                                                            </lightning-input>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </fieldset>
                                </div>
                                <div style={rightCLine} class="lgc-bg">
                                    <lightning-helptext 
                                    content="Push notifications should only be sent when they are relevant. This setting ensures that a push notification will only be sent to the mobile device if the appointment is scheduled to start before the specified number of hours.">
                                    </lightning-helptext>
                                </div>
                            </div>
                            
                            <div  class="slds-p-around_small mn_line cLineStyle">
                
                                <div class="leftCLine">  
                                    <lightning-input   checked={fl_cb_mn_1}
                                                        class="cb"
                                                        type="checkbox" label="Notification of appointment dispatching"
                                                        onchange={onMN1ChecboxChange}
                                                        disabled={cbx_nm_Dis_1}>
                                    </lightning-input>
                                </div>
                                <div style={rightCLine} class="lgc-bg">
                                    <lightning-helptext 
                                    content="Notify the assigned resource when the service appointment status is updated and the status category is Dispatched.">
                                    </lightning-helptext>
                                </div>
                            </div>
                            <div  class="slds-p-around_small cLineStyle ">
                
                                <div class="leftCLine">
                                    <lightning-input   checked={fl_cb_mn_2}
                                                        class="cb"  
                                                        type="checkbox" 
                                                        disabled={cbx_nm_Dis_1}
                                                        label="Notification of emergency appointment dispatching"
                                                        onchange={onMN2ChecboxChange}>
                                    </lightning-input>
                                </div>
                                <div style={rightCLine} class="lgc-bg">
                                    <lightning-helptext 
                                    content="Notify the assigned resource by sending a push notification for emergency appointments when the service appointment status is updated and the status category is Dispatched.">
                                    </lightning-helptext>
                                </div>
                            </div>
                            <div  class="slds-p-around_small cLineStyle">
                
                                <div class="leftCLine">
                                    <lightning-input   checked={fl_cb_mn_3}
                                                        class="cb"
                                                        type="checkbox"
                                                        disabled={cbx_nm_Dis_1} 
                                                        label="Notification of appointment cancellation"
                                                        onchange={onMN3ChecboxChange}>
                                    </lightning-input>
                                </div>
                                <div style={rightCLine} class="lgc-bg">
                                    <lightning-helptext
                                    content="Notify the previously assigned resource that the appointment is cancelled when the appointment status is changed and the status category is Cancelled">
                                    </lightning-helptext>
                                </div>
                            </div>
                        </div>
                        
                        <div class="slds-p-horizontal_medium rightCardStyle">
                            
                        </div>
                    </div> 
                </div>
                
            </lightning-card>
    
            <lightning-card class="borderCls" style={headTitleStyle}>
                <div  class="slds-col slds-size_2-of-3 slds-p-horizontal_x-large" style={cardHeaderStyle}>
                    <h2  style={titleStyle}
                        class="slds-text-heading_small slds-m-bottom_small slds-p-horizontal_x-large" >
                        <b>General Flows</b>
                    </h2>
                </div>
                <div  class="slds-col slds-size_2-of-3 slds-p-left_x-large">
                    <div class="slds-p-horizontal_x-large">
                        <div class="cLine">
                            <div class="slds-p-around_small featureSettingRowStyle">
                                <div class="leftCLineGeneral">
                                    <lightning-input  
                                        checked={cb_g__1}
                                        class="cb"
                                        type="checkbox" 
                                        label="Add asset to account maintenance plan upon installation"
                                        onchange={onG1ChecboxChange}>
                                    </lightning-input>
                                </div>
                                <div class="lgc-bg">
                                        <lightning-helptext 
                                        content="This flow adds an asset from the parent Work order or Work Order Line item to the account maintenance plan. The logic is based on a checkbox field on the Service Appointment record. Use your own logic to check the checkbox field for relevant Service Appointment records.">
                                        </lightning-helptext>                                    
                                </div>
                            </div>

                            <fieldset class="slds-form-element slds-form_horizontal slds-p-right_small">
                                <div class="slds-form-element__control">
                                    <div class="slds-form-element__group">
                                        <div class="slds-form-element__row slds-p-left_large featureSettingRowStyle">
                                            <div class="leftCLine slds-form-element">
                                                <label class="slds-form-element__label">Number of days for work order creation:</label>
                                                <div class="slds-form-element__control slds-size_4-of-5">
                                                    <lightning-input 
                                                        type="number" 
                                                        name="input1"
                                                        disabled={num_of_d_inp_Dis}
                                                        value= {num_of_days_g}
                                                        onchange={handleNumOfDaysChange}
                                                        >
                                                    </lightning-input>
                                                </div>
                                            </div>
                                            <div style={rightCLine} class="lgc-bg">
                                                <lightning-helptext
                                                content="When adding an Asset to a Maintenance Plan, specify the number of days after installation that the first work order will be created.">
                                                </lightning-helptext>
                                            </div>
                                        </div>
                                        <div class="slds-form-element__row slds-p-left_large featureSettingRowStyle">
                                            <div class="leftCLine slds-form-element">
                                                <label class="slds-form-element__label">Select completion / installation status:</label>
                                                <div class="slds-form-element__control slds-size_4-of-5">
                                                    <lightning-combobox
                                                        name="progress"
                                                        label=""
                                                        disabled={num_of_d_inp_Dis}
                                                        value={g_status_selected}
                                                        placeholder="Select completion / installation status"
                                                        options={statusesComplete}
                                                        onchange={handleChangeCmbx}
                                                        variant="label-hidden">
                                                    </lightning-combobox>
                                                </div>
                                            </div>
                                            <div style={rightCLine} class="lgc-bg">
                                                <lightning-helptext
                                                content="Select the Service Appointment status that defines the successful installation of an asset.">
                                                </lightning-helptext>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                        </div>
        
                        <div  class="slds-p-around_small cLineStyle ">
            
                            <div class="leftCLine">

                                <lightning-input   checked={cb_g__2}
                                                    class="cb"
                                                    type="checkbox" 
                                                    label="Field Service users automation"
                                                    onchange={onG2ChecboxChange}>
                                </lightning-input>
                            </div>
                            <div style={rightCLine} class="lgc-bg">
                                <lightning-helptext
                                content="Automatically assign relevant permissions to the user based on their Field Service role and automatically create a service resource record as needed">
                                </lightning-helptext>
                            </div>
                        </div>
                        <div  class="slds-p-around_small cLineStyle" >
            
                            <div class="leftCLine">
                                <lightning-input   checked={cb_g__3}
                                                    class="cb"
                                                    type="checkbox" 
                                                    label="Exclude service resources upon service appointment rejection"
                                                    onchange={onG3ChecboxChange}>
                                </lightning-input>
                            </div>
                            <div style={rightCLine} class="lgc-bg">
                                <lightning-helptext 
                                content="When the assignment is rejected by Resources, add a Resource Preference of type Excluded. The flow ensures that the service resource will no longer be considered a candidate for the service appointment.">
                            </lightning-helptext>
                            </div>
                        </div>
                        <div  class="slds-p-around_small  cLineStyle">
            
                            <div class="leftCLine">
                                <lightning-input   checked={cb_g__4}
                                                    class="cb"
                                                    type="checkbox" 
                                                    label="Populate the custom Service Resource Lookup field on the Service Appointment Record."
                                                    onchange={onG4ChecboxChange}>
                                </lightning-input>
                            </div>
                            <div style={rightCLine} class="lgc-bg">
                                <lightning-helptext
                                content="This flow copies the Service Resource ID from the Assigned Resources related list to a new lookup field on the Service Appointment object.">
                            </lightning-helptext>
                            </div>
                        </div>
                        <div  class="slds-p-around_small  cLineStyle">
            
                            <div class="leftCLine">
                                <lightning-input   checked={cb_g__5}
                                                    class="cb"
                                                    type="checkbox"
                                                    label="Set a custom Work Order lookup field to the Service Appointment's Parent ID."
                                                    onchange={onG5ChecboxChange}>
                                </lightning-input>
                            </div>
                            <div style={rightCLine} class="lgc-bg">
                                <lightning-helptext
                                content="This flow populates a custom Work Order lookup field with the parent ID if the parent is a Work Order.">
                            </lightning-helptext>
                            </div>
                        </div>
                        <div  class="slds-p-around_small  cLineStyle">
            
                            <div class="leftCLine">
                                <lightning-input   checked={cb_g__6}
                                                    class="cb"
                                                    type="checkbox"
                                                    label="Automatically set the Gantt Label field"
                                                    onchange={onG6ChecboxChange}>
                                </lightning-input>
                            </div>
                            <div style={rightCLine} class="lgc-bg">
                                <lightning-helptext 
                                content="Auto Set Gantt Label value by concatenation of the Account and Work Type fields. You can change the concatenation string and change the Gantt Label text via the Flow definition in the Salesforce Setup menu.">
                            </lightning-helptext>
                            </div>
                        </div>
                        <div  class="slds-p-around_small  cLineStyle">
                            <div class="leftCLine">
                                <lightning-input   checked={cb_g__7}
                                                    class="cb"
                                                    type="checkbox"
                                                    label="Service Resource deactivation automation"
                                                    onchange={onG7ChecboxChange}>
                                </lightning-input>
                            </div>
                            <div style={rightCLine} class="lgc-bg">
                                <lightning-helptext 
                                content="This flow removes all Field Service permission set licenses and all relevant permission sets from the associated user record upon Service Resource deactivation.">
                            </lightning-helptext>
                            </div>
                        </div>
                    </div>
                    <div class="slds-p-horizontal_medium"  style={rightCardStyle}>
                    </div>
                </div> 
            </lightning-card>
        </lightning-card>
        
    </div>
    <div class="toTheTop">
        <span>
            <button 
                class="slds-button slds-button--brand"
                onclick={saveData}>
                Save
            </button>
        </span>     
    </div>
</template>